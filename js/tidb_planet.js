!function(n){var o={};function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/js/",a(a.s=25)}({0:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var o=n(1),a=n.n(o),r="_tidb_planet_",i={CONTRIBUTIONS_RANK:"".concat(r,"contributions_rank"),USERNAME:"".concat(r,"username"),DATE:"".concat(r,"date"),AVATAR:"".concat(r,"avatar_url"),CONTRIBUTIONS:"".concat(r,"contributions"),FIRST_ACCESS:"".concat(r,"first_access")},c=function(){var e={};for(var t in i){var n=a.a.get(i[t]);e[t]=n}return e},s=function(e,t){a.a.set(i[e],t)}},1:function(a,r,i){var c,s;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(e){var t=!1;if(void 0===(s="function"==typeof(c=e)?c.call(r,i,r,a):c)||(a.exports=s),t=!0,"object"===l(r)&&(a.exports=e(),t=!0),!t){var n=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=n,o}}}(function(){function m(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}return function e(f){function v(e,t,n){var o;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=m({path:"/"},v.defaults,n)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*n.expires),n.expires=a}n.expires=n.expires?n.expires.toUTCString():"";try{o=JSON.stringify(t),/^[\{\[]/.test(o)&&(t=o)}catch(e){}t=f.write?f.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var r="";for(var i in n)n[i]&&(r+="; "+i,!0!==n[i]&&(r+="="+n[i]));return document.cookie=e+"="+t+r}e||(o={});for(var c=document.cookie?document.cookie.split("; "):[],s=/(%[0-9A-Z]{2})+/g,l=0;l<c.length;l++){var u=c[l].split("="),d=u.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var p=u[0].replace(s,decodeURIComponent);if(d=f.read?f.read(d,p):f(d,p)||d.replace(s,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(e===p){o=d;break}e||(o[p]=d)}catch(e){}}return o}}return(v.set=v).get=function(e){return v.call(v,e)},v.getJSON=function(){return v.apply({json:!0},[].slice.call(arguments))},v.defaults={},v.remove=function(e,t){v(e,"",m(t,{expires:-1}))},v.withConverter=e,v}(function(){})})},25:function(e,t,n){"use strict";n.r(t);var o=n(0);$.ajax({url:"https://pingcap.com/api/contributors",crossDomain:!0,success:function(e){window.tidbContributors=e.data,e.data&&($(".j-amount").text(e.data.length),$(".j-show").show())}});function a(e){return/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/i.test(e)}function r(){return!Object(o.a)().FIRST_ACCESS}function i(){$(".input-container .inner").removeClass("error"),$(".input-container .inner").remove(),$(".form__input").val(null)}function c(){$(".j-video-overlay").fadeIn(),$(".j-video-overlay, .modal").addClass("active");var e=document.querySelector("video").play();void 0!==e&&e.catch(function(e){console.log("Auto-play was prevented by browser")}).then(function(){}),u()}function s(n){var e=window.tidbContributors;e.sort(function(e,t){var n=e.login.toUpperCase(),o=t.login.toUpperCase();return n<o?-1:o<n?1:0});var o=_.floor(e.length/5),a=[];e.forEach(function(e,t){n<4?n*o<=t&&t<(n+1)*o&&a.push(e):n*o<=t&&a.push(e)}),a.forEach(function(e){var t,n,o;o='  <div class="list__item">    <div class="github-avatar">      <img src="'.concat((t=e).avatar_url,'" width="36px" height="36px"/>    </div>    <div class="contributor-info">      <div class="contributor-name"><a href="https://github.com/').concat(t.login,'" target="_blank">').concat(t.login,'</a></div>      <div class="contribution-degree" data-degree="').concat(0<=(n=t.contributions)&&n<=5?1:6<=n&&n<=10?2:11<=n&&n<=20?3:4,'">        <span class="dot dot-1"></span>        <span class="dot dot-2"></span>        <span class="dot dot-3"></span>        <span class="dot dot-4"></span>      </div>    </div>  </div> '),$("#contributors").append(o)})}function l(){var e=$(".modal-overlay.active").data("type");$(".modal-overlay").fadeOut(),$(".modal-overlay, .modal").removeClass("active"),"login"===e&&i(),"video"===e&&$("#video")[0].pause(),"contributors"===e&&$("#contributors").html(""),"capture"===e&&$(".html2image-container").removeClass("show")}var u=function(){document.addEventListener("WeixinJSBridgeReady",function(){$("#video")[0].play()})};$(function(){$("body").hasClass("welcome-page")&&!r()&&$("body").append('<div class="guide-again scale-in-center">Click these elements and explore the planet again!</div>'),Object(o.a)().USERNAME||($(".j-login").show(),$("body").hasClass("welcome-page")&&r()&&(Object(o.b)("FIRST_ACCESS","-1"),$("body").append('<div class="mask j-mask"></div>'))),$("body").hasClass("milestones-page")&&c(),$(".nav").fadeIn(),768<$("body")[0].offsetWidth?$(".j-forward").addClass("animation-forward_arrow"):$(".j-login").css("display","none"),setTimeout(function(){$(".j-fadeOutSlowly").fadeOut("slow")},5e3),$("#video").on("ended",function(){console.log("Video has ended!"),$(".j-video-overlay").fadeOut(),$(".j-video-overlay, .modal").removeClass("active")}),$(".close-modal").off("click").on("click",function(e){l(),e.preventDefault(),e.stopPropagation()}),$(".modal-overlay").on("click",function(e){$(this).hasClass("active")&&_.isEqual(e.target,e.delegateTarget)&&l()}),$(".j-login").on("click",function(e){$(".j-login-overlay").fadeIn(),$(".j-login-overlay, .modal").addClass("active"),e.preventDefault(),e.stopPropagation()}),$(".j-later").on("click",function(e){$(".j-login-overlay").fadeOut(),$(".j-login-overlay, .modal").removeClass("active"),i(),e.preventDefault(),e.stopPropagation()}),$(".j-open-dorm").off("click").on("click",function(e){var t=$(this).data("index");s(t),$(".j-contributors-overlay").fadeIn(),$(".j-contributors-overlay, .modal").addClass("active"),e.preventDefault(),e.stopPropagation()}),$(".j-video-btn").on("click",function(e){c(),e.preventDefault(),e.stopPropagation()}),$(".j-popup").on("click",function(e){$(".popup").fadeOut(),e.preventDefault(),e.stopPropagation()}),$(".j-open-popup").on("click",function(e){$(".popup").fadeIn(),e.preventDefault(),e.stopPropagation()}),$(".j-readmore").on("click",function(e){"zh"==navigator.language.substring(0,2)&&$(this).attr("href","https://pingcap.com/docs-cn/releases/3.0beta/"),window.open($(this).attr("href")),e.preventDefault(),e.stopPropagation()}),$(".form__input").blur(function(){a($(this).val())||$(".error").length||($(".input-container").append('<span class="inner" >Please enter a valid username.</span>'),setTimeout(function(){$(".input-container .inner").addClass("error")},100))}),$(".form__input").focus(function(){$(".input-container .inner").removeClass("error"),$(".input-container .inner").remove()}),$(".form").submit(function(e){$(".form__input").blur();var t=$(".form__input").val();a(t)&&($(".modal-login").addClass("landing"),function(t){var e=window.tidbContributors.findIndex(function(e){return e.login.toLowerCase()===t.toLowerCase()});if(-1<e){var n=window.tidbContributors[e];Object(o.b)("CONTRIBUTIONS_RANK",e+1),Object(o.b)("DATE",n.date),Object(o.b)("CONTRIBUTIONS",n.contributions),Object(o.b)("AVATAR",n.avatar_url)}else console.log("Welcome to the TiDB planet, join us now! www.pingcap.com")}(t),Object(o.b)("USERNAME",t),setTimeout(function(){location.href="/tidb-planet/user/"},2e3)),e.preventDefault()}),function(){for(var e=document.getElementById("meteors"),t=document.getElementsByClassName("meteor"),n=0;n<2;n++){var o=document.createElement("div");o.className="meteor",o.style.top=a(60,-30)+"px",o.style.left=a(150,20)+"px",e.appendChild(o)}function a(e,t){return Math.floor(Math.random()*(e-t+1)*10+t)}for(var r=0,i=t.length;r<i;r++)t[r].style.animationDelay=r%6==0?"0s":.8*r+"s"}()})}});